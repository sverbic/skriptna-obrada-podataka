
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Čišćenje podataka u Pajtonu &#8212; Skriptna obrada i analiza podataka u Pajtonu</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Priprema i deskriptivna analiza numeričkih podataka" href="4%20Priprema%20i%20deskriptivna%20analiza%20numeri%C4%8Dkih%20podataka.html" />
    <link rel="prev" title="Eksplorativna analiza podataka" href="2%20Eksplorativna%20analiza%20podataka.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Skriptna obrada i analiza podataka u Pajtonu</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Skriptna obrada i analiza podataka u Pajtonu
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="0%20Uvod.html">
   Uvod
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="1%20Obrada%20tabelarnih%20podataka%20u%20Pajtonu.html">
   Obrada tabelarnih podataka u Pajtonu
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2%20Eksplorativna%20analiza%20podataka.html">
   Eksplorativna analiza podataka
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Čišćenje podataka u Pajtonu
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="4%20Priprema%20i%20deskriptivna%20analiza%20numeri%C4%8Dkih%20podataka.html">
   Priprema i deskriptivna analiza numeričkih podataka
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="5%20Vizuelizacija%20podataka%20na%20geografskoj%20mapi.html">
   Vizuelizacija podataka na geografskoj mapi
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="6%20Ma%C5%A1inska%20obrada%20tekstualnih%20podataka.html">
   Mašinska obrada tekstualnih podataka
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="7%20Koeficijent%20korelacije.html">
   Koeficijent korelacije
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="8%20Kvantifikacija%20sli%C4%8Dnosti%20i%20razlika%20slo%C5%BEenih%20objekata.html">
   Kvantifikacija sličnosti i razlika složenih objekata
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="9%20Fitovanje%20podataka.html">
   Fitovanje podataka
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="10%20Vi%C5%A1estruka%20linearna%20regresija.html">
   Višestruka linearna regresija
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="11%20Stablo%20odlu%C4%8Divanja.html">
   Stablo odlučivanja
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="12%20Klasterska%20analiza.html">
   Klasterska analiza
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/3 Čišćenje podataka u Pajtonu.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/executablebooks/jupyter-book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2F3 Čišćenje podataka u Pajtonu.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/docs/3 Čišćenje podataka u Pajtonu.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#indeksna-kolona">
   Indeksna kolona
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pristupanje-podacima-pomocu-pristupnika-loc-i-iloc">
   Pristupanje podacima pomoću “pristupnika” loc[] i iloc[]
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#izbor-kolona">
   Izbor kolona
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#priprema-numerickih-podataka">
     Priprema numeričkih podataka
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#regularni-izrazi">
     Regularni izrazi
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ciscenje-tekstualnih-podataka">
     Čišćenje tekstualnih podataka
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#datum-i-vreme">
     Datum i vreme
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#bonus-problemi">
   Bonus problemi
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cirilica-i-latinica">
     Ćirilica i latinica
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#decimalni-zarez-i-decimalna-tacka">
     Decimalni zarez i decimalna tačka
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="ciscenje-podataka-u-pajtonu">
<h1>Čišćenje podataka u Pajtonu<a class="headerlink" href="#ciscenje-podataka-u-pajtonu" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p>Ova sveska je posvećena algoritamskom čišćenju podataka gde pokušavamo da prepoznamo obrazac greške kako bismo sve takve greške ispravili u što manje koraka. Sadržaj je napredniji i teži za razumevanje nego u ostalim sveskama. Svejedno, važno je da vidimo kako čišćenje podataka funkcioniše i zašto je neophodno za kvalitetnu analizu podataka.</p>
</div></blockquote>
<p>Velike količine podataka koje prikupljaju i unose različiti ljudi uvek nose rizik od nedoslednosti u pogledu formata unosa. Sa mašinama je lako, ali ljudi u skladu sa svojom kulturom, navikama ili potrebom da budu kreativni često unose ono što nam ne treba. Za mašinski čitljive podatke je najvažnije da imaju poznatu strukturu i da budu formatirani na isti način. Ovo možda zvuči kao nepotrebno cepidlačenje, ali nije. Ljudi koji se bave obradom i analizom podataka najveći deo svog vremena troše na čišćenje podataka (eng. <em>data cleaning</em>).</p>
<p>Uvek treba imati na umu da je čišćenje podataka, u krajnjoj liniji, proizvoljno menjanje podataka o kojima znamo manje od onoga ko je podatke unosio. Normalno je da oni koji unose podatke naprave previd ili podatak unesu na pogrešan način. Isto tako je normalno da mi to primetimo i napravimo korekciju. Za neke druge podatke, opet, ne znamo šta da mislimo; možda je greška, možda nije. Granica je svakako subjektivna. Onaj ko čisti podatke mora da ima znanje iz oblasti na koju se podaci odnose, da zna šta je moguće a šta nije, šta može da bude verodostojno, a šta je sigurno greška. Baš zbog toga što je kriterijum za korekciju podataka subjektivan ne možemo potpuno da ga automatizujemo. To moraju da rade ljudi koji znaju kontekst podataka. Mašina može da pomogne da to uradimo brže.</p>
<p>Nas u ovom kursu interesuju pre svega podaci spakovani u tabele, odnosno jednu konkretnu tabelarnu strukturu <em>DataFrame</em>. Ova struktura, kao i funkcije za rad sa njom, sastavni su deo biblioteke <strong>pandas</strong> pa je uputno na početku rada sa podacima u Pajtonu uvek prvo učitati ovu biblioteku.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
</div>
</div>
<p>Za potrebe obuke učitaćemo jedan fajl kom je potrebno malo čišćenja. To je <a class="reference external" href="https://github.com/realpython/python-data-cleaning/blob/master/Datasets/BL-Flickr-Images-Book.csv">bibliotečki registar</a> u kom se nalaze ime knjige, autor, izdavač, godina izdanja itd.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;data/BL-Flickr-Images-Book.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Identifier</th>
      <th>Edition Statement</th>
      <th>Place of Publication</th>
      <th>Date of Publication</th>
      <th>Publisher</th>
      <th>Title</th>
      <th>Author</th>
      <th>Contributors</th>
      <th>Corporate Author</th>
      <th>Corporate Contributors</th>
      <th>Former owner</th>
      <th>Engraver</th>
      <th>Issuance type</th>
      <th>Flickr URL</th>
      <th>Shelfmarks</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>206</td>
      <td>NaN</td>
      <td>London</td>
      <td>1879 [1878]</td>
      <td>S. Tinsley &amp; Co.</td>
      <td>Walter Forbes. [A novel.] By A. A</td>
      <td>A. A.</td>
      <td>FORBES, Walter.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 12641.b.30.</td>
    </tr>
    <tr>
      <th>1</th>
      <td>216</td>
      <td>NaN</td>
      <td>London; Virtue &amp; Yorston</td>
      <td>1868</td>
      <td>Virtue &amp; Co.</td>
      <td>All for Greed. [A novel. The dedication signed...</td>
      <td>A., A. A.</td>
      <td>BLAZE DE BURY, Marie Pauline Rose - Baroness</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 12626.cc.2.</td>
    </tr>
    <tr>
      <th>2</th>
      <td>218</td>
      <td>NaN</td>
      <td>London</td>
      <td>1869</td>
      <td>Bradbury, Evans &amp; Co.</td>
      <td>Love the Avenger. By the author of “All for Gr...</td>
      <td>A., A. A.</td>
      <td>BLAZE DE BURY, Marie Pauline Rose - Baroness</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 12625.dd.1.</td>
    </tr>
    <tr>
      <th>3</th>
      <td>472</td>
      <td>NaN</td>
      <td>London</td>
      <td>1851</td>
      <td>James Darling</td>
      <td>Welsh Sketches, chiefly ecclesiastical, to the...</td>
      <td>A., E. S.</td>
      <td>Appleyard, Ernest Silvanus.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 10369.bbb.15.</td>
    </tr>
    <tr>
      <th>4</th>
      <td>480</td>
      <td>A new edition, revised, etc.</td>
      <td>London</td>
      <td>1857</td>
      <td>Wertheim &amp; Macintosh</td>
      <td>[The World in which I live, and my place in it...</td>
      <td>A., E. S.</td>
      <td>BROOME, John Henry.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 9007.d.28.</td>
    </tr>
    <tr>
      <th>5</th>
      <td>481</td>
      <td>Fourth edition, revised, etc.</td>
      <td>London</td>
      <td>1875</td>
      <td>William Macintosh</td>
      <td>[The World in which I live, and my place in it...</td>
      <td>A., E. S.</td>
      <td>BROOME, John Henry.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 9006.ee.10.</td>
    </tr>
    <tr>
      <th>6</th>
      <td>519</td>
      <td>NaN</td>
      <td>London</td>
      <td>1872</td>
      <td>The Author</td>
      <td>Lagonells. By the author of Darmayne (F. E. A....</td>
      <td>A., F. E.</td>
      <td>ASHLEY, Florence Emily.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 12637.e.3.</td>
    </tr>
    <tr>
      <th>7</th>
      <td>667</td>
      <td>NaN</td>
      <td>pp. 40. G. Bryan &amp; Co: Oxford, 1898</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>The Coming of Spring, and other poems. By J. A...</td>
      <td>A., J.|A., J.</td>
      <td>ANDREWS, J. - Writer of Verse</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 011652.g.73.</td>
    </tr>
    <tr>
      <th>8</th>
      <td>874</td>
      <td>NaN</td>
      <td>London]</td>
      <td>1676</td>
      <td>NaN</td>
      <td>A Warning to the inhabitants of England, and L...</td>
      <td>Remaʿ.</td>
      <td>ADAMS, Mary.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 11645.bb.42.</td>
    </tr>
    <tr>
      <th>9</th>
      <td>1143</td>
      <td>NaN</td>
      <td>London</td>
      <td>1679</td>
      <td>NaN</td>
      <td>A Satyr against Vertue. (A poem: supposed to b...</td>
      <td>A., T.</td>
      <td>OLDHAM, John.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 11602.ee.10.(2.)</td>
    </tr>
    <tr>
      <th>10</th>
      <td>1280</td>
      <td>NaN</td>
      <td>Coventry</td>
      <td>1802</td>
      <td>Printed by J. Turner</td>
      <td>An Account of the many and great Loans, Benefa...</td>
      <td>NaN</td>
      <td>CARTE, Samuel.|JACKSON, Edward - Rector of Sou...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 1430.g.17.</td>
    </tr>
    <tr>
      <th>11</th>
      <td>1808</td>
      <td>NaN</td>
      <td>Christiania</td>
      <td>1859</td>
      <td>NaN</td>
      <td>Erindringer som Bidrag til Norges Historie fra...</td>
      <td>AALL, Jacob.</td>
      <td>AALL, J. C.|LANGE, Christian Christoph Andreas.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 9425.cc.37.</td>
    </tr>
    <tr>
      <th>12</th>
      <td>1905</td>
      <td>NaN</td>
      <td>Firenze</td>
      <td>1888</td>
      <td>NaN</td>
      <td>Gli Studi storici in terra d'Otranto ... Framm...</td>
      <td>AAR, Ermanno - pseud. [i.e. Luigi Giuseppe Oro...</td>
      <td>S., L. G. D.|SIMONE, Luigi Giuseppe Oronzo Mar...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 10136.g.22.</td>
    </tr>
    <tr>
      <th>13</th>
      <td>1929</td>
      <td>NaN</td>
      <td>Amsterdam</td>
      <td>1839, 38-54</td>
      <td>NaN</td>
      <td>De Aardbol. Magazijn van hedendaagsche land- e...</td>
      <td>NaN</td>
      <td>WITKAMP, Pieter Harme.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 10002.g.16-19.</td>
    </tr>
    <tr>
      <th>14</th>
      <td>2836</td>
      <td>NaN</td>
      <td>Savona</td>
      <td>1897</td>
      <td>NaN</td>
      <td>Cronache Savonesi dal 1500 al 1570 ... Accresc...</td>
      <td>ABATE, Giovanni Agostino.</td>
      <td>ASSERETO, Giovanni.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 10136.h.24.</td>
    </tr>
    <tr>
      <th>15</th>
      <td>2854</td>
      <td>NaN</td>
      <td>London</td>
      <td>1865</td>
      <td>E. Moxon &amp; Co.</td>
      <td>See-Saw; a novel ... Edited [or rather, writte...</td>
      <td>ABATI, Francesco.</td>
      <td>READE, William Winwood.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 12623.bbb.12.</td>
    </tr>
    <tr>
      <th>16</th>
      <td>2956</td>
      <td>NaN</td>
      <td>Paris</td>
      <td>1860-63</td>
      <td>NaN</td>
      <td>Géodésie d'une partie de la Haute Éthiopie,...</td>
      <td>ABBADIE, Antoine Thompson d'.</td>
      <td>RADAU, Rodolphe.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 10096.i.19.</td>
    </tr>
    <tr>
      <th>17</th>
      <td>2957</td>
      <td>NaN</td>
      <td>Paris</td>
      <td>1873</td>
      <td>NaN</td>
      <td>[With eleven maps.]</td>
      <td>ABBADIE, Antoine Thompson d'.</td>
      <td>RADAU, Rodolphe.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 10095.i.13.</td>
    </tr>
    <tr>
      <th>18</th>
      <td>3017</td>
      <td>Nueva edicion, anotada ... y continuada ... po...</td>
      <td>Puerto-Rico</td>
      <td>1866</td>
      <td>NaN</td>
      <td>[Historia geográfica, civil y politica de la ...</td>
      <td>ABBAD Y LASIERRA, Agustín Íñigo - Bishop of...</td>
      <td>ACOSTA Y CALBO, José Julian de.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 10480.h.18.</td>
    </tr>
    <tr>
      <th>19</th>
      <td>3131</td>
      <td>NaN</td>
      <td>New York</td>
      <td>1899</td>
      <td>W. Abbatt</td>
      <td>The Crisis of the Revolution, being the story ...</td>
      <td>ABBATT, William.</td>
      <td>ANDRÉ, John - Major|ARNOLD, Benedict.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 9603.g.14.</td>
    </tr>
    <tr>
      <th>20</th>
      <td>4598</td>
      <td>NaN</td>
      <td>Hull</td>
      <td>1814</td>
      <td>The Author</td>
      <td>Peace: a lyric poem. [With prefatory address b...</td>
      <td>ABBOTT, Thomas Eastoe.</td>
      <td>WRANGHAM, Francis.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 11641.f.1.</td>
    </tr>
    <tr>
      <th>21</th>
      <td>4884</td>
      <td>NaN</td>
      <td>London</td>
      <td>1820</td>
      <td>J. Hatchard &amp; Son</td>
      <td>Abdallah; or, The Arabian Martyr: a Christian ...</td>
      <td>NaN</td>
      <td>BARHAM, Thomas Foster - the Elder</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 994.l.1.(7.)</td>
    </tr>
    <tr>
      <th>22</th>
      <td>4976</td>
      <td>[Another edition.] Abdollatiphi historiæ Ægypt...</td>
      <td>Oxonii</td>
      <td>1800</td>
      <td>J. Cooke, etc.</td>
      <td>[Abdollatiphi Historiæ Ægypti compendium. [Wit...</td>
      <td>NaN</td>
      <td>WHITE, Joseph - Canon of Christ Church</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 983.e.6.|British Library...</td>
    </tr>
    <tr>
      <th>23</th>
      <td>5382</td>
      <td>NaN</td>
      <td>London</td>
      <td>1847, 48 [1846-48]</td>
      <td>Punch Office</td>
      <td>The Comic History of England ... With ... colo...</td>
      <td>A'BECKETT, Gilbert Abbott.</td>
      <td>LEECH, John - Artist</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS C.131.d.16.|British Libr...</td>
    </tr>
    <tr>
      <th>24</th>
      <td>5385</td>
      <td>[Another edition.] Illustrated by John Leech.</td>
      <td>London</td>
      <td>[1897?]</td>
      <td>Bradbury, Agnew &amp; Co.</td>
      <td>[The comic history of England ... With twenty ...</td>
      <td>A'BECKETT, Gilbert Abbott.</td>
      <td>LEECH, John - Artist</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 9503.f.4.</td>
    </tr>
    <tr>
      <th>25</th>
      <td>5389</td>
      <td>[Another edition.]</td>
      <td>London</td>
      <td>[1897?]</td>
      <td>Bradbury, Agnew &amp; Co.</td>
      <td>[The Comic History of Rome ... Illustrated by ...</td>
      <td>A'BECKETT, Gilbert Abbott.</td>
      <td>LEECH, John - Artist</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 9039.i.11.</td>
    </tr>
    <tr>
      <th>26</th>
      <td>5432</td>
      <td>NaN</td>
      <td>Milano</td>
      <td>1893</td>
      <td>NaN</td>
      <td>Signa: opera in tre atti [founded on the novel...</td>
      <td>A'BECKETT, Gilbert Arthur - and RUDALL (H. A.)</td>
      <td>MAZZUCATO, Giovanni Andrea.|RUDALL, H. A.|Ouida</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 11779.g.8.(10.)</td>
    </tr>
    <tr>
      <th>27</th>
      <td>6036</td>
      <td>NaN</td>
      <td>London</td>
      <td>1805</td>
      <td>C. &amp; R. Baldwin</td>
      <td>The Venetian Outlaw, a drama in three acts ......</td>
      <td>NaN</td>
      <td>ELLISTON, Robert William.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 642.i.25.|British Librar...</td>
    </tr>
    <tr>
      <th>28</th>
      <td>6821</td>
      <td>NaN</td>
      <td>Aberdeen</td>
      <td>1837</td>
      <td>J. Davidson &amp; Co.</td>
      <td>Description of the Coast between Aberdeen and ...</td>
      <td>NaN</td>
      <td>DUNCAN, William - Clerk of Police, Aberdeen</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 797.d.2.</td>
    </tr>
    <tr>
      <th>29</th>
      <td>7521</td>
      <td>NaN</td>
      <td>Wien</td>
      <td>1896</td>
      <td>NaN</td>
      <td>Aus Kaukasischen Ländern. Reisebriefe von H. ...</td>
      <td>ABICH, Wilhelm Hermann.</td>
      <td>ABICH, Adelaïde.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 10077.h.21.</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Čak i površan uvid u podatke otkriva da ima mnogo polja u kojima piše NaN što znači da tog podatka nema, a da je neki softver prazno polje zamenio ovom oznakom. Nadajmo se da se nijedan izdavač ili knjiga ne zovu baš “NaN”. Takođe, vidimo da neki podaci nisu konzistentno unošeni. Za godinu izdanja (<em>Date of Publication</em>) uglavnom stoji broj, ali ima i onih sa uglastim zagradama. Imena autora izgledaju kao haos posebne vrste.</p>
<section id="indeksna-kolona">
<h2>Indeksna kolona<a class="headerlink" href="#indeksna-kolona" title="Permalink to this headline">¶</a></h2>
<p>Vrlo važna karakteristika funkcionalne tabele sa podacima jeste da ima kolonu u kojoj se vrednosti ne ponavljaju. Takvih kolona može biti više, ali jednu od njih treba izabrati za “glavnu” i proglasiti je indeksnom kolonom. Takva kolona nam omogućava jednoznačno označavanje redova u tabeli. Svaki element te kolone odgovara tačno jednom redu u tabeli.</p>
<p>Da bismo se na sličan način pozivali na kolone u tabeli, potreban nam je “indeksni red”. On već postoji. To je zapravo zaglavlje tabele, odnosno red u kom su nazivi kolona. Nazivi kolona ne mogu da se ponavljaju pa je su vrednosti u tom redu jedinstvene.</p>
<p>Svaki <em>DataFrame</em> automatski dobija svoju indeksnu kolonu. Ako mi ne kažemo mašini koja je to kolona, Pajton će sam dodeliti kolonu sa indeksom 0, 1, 2, 3… Najvažnije svojstvo indeksne kolone je da sadrži jedinstvene podatke. Ako se podaci u koloni ponavljaju onda ona ne može da bude indeksna.</p>
<p>U tabeli <strong>bibreg</strong> postoji kolona <strong>Identifier</strong> koja bi mogla da bude taj jedinstveni identifikator koji su uneli bibliotekari mnogo pre nego što se neko setio da pravi tabele u Pajtonu. Da li su sve vrednosti u koloni jedinstvene možemo da proverimo funkcijom <code class="docutils literal notranslate"><span class="pre">is.unique()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span><span class="p">[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">is_unique</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>Jeste jedinstvena. To znači da možemo nju da koristimo umesto automatski dodeljenog niza nenegativnih celih brojeva. To ćemo učiniti pomoću funkcije <code class="docutils literal notranslate"><span class="pre">set_index()</span></code>. Glavni argument ove funkcije je naziv kolone koju ćemo proglasiti za indeksnu, ali argumenata može da bude više. Ovde ćemo iskoristiti argument <code class="docutils literal notranslate"><span class="pre">inplace=True</span></code> koji Pajtonu saopštava da hoćemo da promeni i zapamti sadržaj tabele. Bez toga bismo samo dobili ispis u kom je postavljena indeksna kolona dok bi u memoriji ostao isti onaj stari DataFrame. Naravno, isti rezultat bismo mogli da dobijemo i ako novoj tabeli pridružimo izmenjenu tabelu: <code class="docutils literal notranslate"><span class="pre">bibreg=bibreg.set_index('Identifier')</span></code>. To su dva načina da dobijemo isti rezultat. Birajte šta vam se više sviđa.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Identifier&#39;</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">bibreg</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Edition Statement</th>
      <th>Place of Publication</th>
      <th>Date of Publication</th>
      <th>Publisher</th>
      <th>Title</th>
      <th>Author</th>
      <th>Contributors</th>
      <th>Corporate Author</th>
      <th>Corporate Contributors</th>
      <th>Former owner</th>
      <th>Engraver</th>
      <th>Issuance type</th>
      <th>Flickr URL</th>
      <th>Shelfmarks</th>
    </tr>
    <tr>
      <th>Identifier</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>206</th>
      <td>NaN</td>
      <td>London</td>
      <td>1879 [1878]</td>
      <td>S. Tinsley &amp; Co.</td>
      <td>Walter Forbes. [A novel.] By A. A</td>
      <td>A. A.</td>
      <td>FORBES, Walter.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 12641.b.30.</td>
    </tr>
    <tr>
      <th>216</th>
      <td>NaN</td>
      <td>London; Virtue &amp; Yorston</td>
      <td>1868</td>
      <td>Virtue &amp; Co.</td>
      <td>All for Greed. [A novel. The dedication signed...</td>
      <td>A., A. A.</td>
      <td>BLAZE DE BURY, Marie Pauline Rose - Baroness</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 12626.cc.2.</td>
    </tr>
    <tr>
      <th>218</th>
      <td>NaN</td>
      <td>London</td>
      <td>1869</td>
      <td>Bradbury, Evans &amp; Co.</td>
      <td>Love the Avenger. By the author of “All for Gr...</td>
      <td>A., A. A.</td>
      <td>BLAZE DE BURY, Marie Pauline Rose - Baroness</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 12625.dd.1.</td>
    </tr>
    <tr>
      <th>472</th>
      <td>NaN</td>
      <td>London</td>
      <td>1851</td>
      <td>James Darling</td>
      <td>Welsh Sketches, chiefly ecclesiastical, to the...</td>
      <td>A., E. S.</td>
      <td>Appleyard, Ernest Silvanus.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 10369.bbb.15.</td>
    </tr>
    <tr>
      <th>480</th>
      <td>A new edition, revised, etc.</td>
      <td>London</td>
      <td>1857</td>
      <td>Wertheim &amp; Macintosh</td>
      <td>[The World in which I live, and my place in it...</td>
      <td>A., E. S.</td>
      <td>BROOME, John Henry.</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>monographic</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
      <td>British Library HMNTS 9007.d.28.</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="pristupanje-podacima-pomocu-pristupnika-loc-i-iloc">
<h2>Pristupanje podacima pomoću “pristupnika” loc[] i iloc[]<a class="headerlink" href="#pristupanje-podacima-pomocu-pristupnika-loc-i-iloc" title="Permalink to this headline">¶</a></h2>
<p>Sad kad imamo indeksnu kolonu, podacima u tabeli možemo da pristupamo na različite načine. <code class="docutils literal notranslate"><span class="pre">loc[]</span></code> i <code class="docutils literal notranslate"><span class="pre">iloc[]</span></code> su posebni načini pristupa podacima preko oznaka i indeksa. U prvom slučaju koristimo oznake, tj. podatke iz indeksne kolone i nazive kolona, a u drugom redne brojeve redova i kolona koji počinju nulom. Evo primera kako možemo da ih upotrebimo. Primetite kako se indeksna kolona ne broji kao ni red u kom su nazivi kolona.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">216</span><span class="p">,</span><span class="s1">&#39;Publisher&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Virtue &amp; Co.&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Virtue &amp; Co.&#39;
</pre></div>
</div>
</div>
</div>
<p>Slično možemo da pristupimo samo određenim redovima ili kolonama. Na primer, ovako:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">216</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Edition Statement                                                       NaN
Place of Publication                               London; Virtue &amp; Yorston
Date of Publication                                                    1868
Publisher                                                      Virtue &amp; Co.
Title                     All for Greed. [A novel. The dedication signed...
Author                                                            A., A. A.
Contributors                   BLAZE DE BURY, Marie Pauline Rose - Baroness
Corporate Author                                                        NaN
Corporate Contributors                                                  NaN
Former owner                                                            NaN
Engraver                                                                NaN
Issuance type                                                   monographic
Flickr URL                http://www.flickr.com/photos/britishlibrary/ta...
Shelfmarks                                British Library HMNTS 12626.cc.2.
Name: 216, dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Identifier
206                          London
216        London; Virtue &amp; Yorston
218                          London
472                          London
480                          London
                     ...           
4158088                      London
4158128                       Derby
4159563                      London
4159587         Newcastle upon Tyne
4160339                      London
Name: Place of Publication, Length: 8287, dtype: object
</pre></div>
</div>
</div>
</div>
</section>
<section id="izbor-kolona">
<h2>Izbor kolona<a class="headerlink" href="#izbor-kolona" title="Permalink to this headline">¶</a></h2>
<p>Tabele sa podacima znaju da budu prevelike. Ne zbog memorije računara, nego zato što ne možemo lako da vidimo podatke na ekranu. Zato je uvek dobro osloboditi se balasta na početku. Ako nam za konkretan zadatak neke kolone (ili redovi) nisu potrebne, onda ih treba odmah izbrisati i raditi sam manjom tabelom.</p>
<p>Ako nam je potrebno svega nekoliko kolona, najbolje je da njihove nazive stavimo u listu i svedemo <em>DataFrame</em> tako da sadrži samo njih. U suprotnom, ako hoćemo samo neke da isključimo, stavimo ih u listu i pozovemo funkciju <code class="docutils literal notranslate"><span class="pre">drop()</span></code> iz <strong>pandas</strong> biblioteke. Na primer, možemo da stavimo kao argument funkcije <code class="docutils literal notranslate"><span class="pre">drop()</span></code> listu za_brisanje koju smo prethodno definisali kao <code class="docutils literal notranslate"><span class="pre">za_brisanje=['Edition</span> <span class="pre">Statement','Corporate</span> <span class="pre">Author','Corporate</span> <span class="pre">Contributors','Former</span> <span class="pre">owner','Engraver','Contributors','Issuance</span> <span class="pre">type','Shelfmarks']</span></code>. Priznaćete, malo je zametno navoditi sve nazive kolona koje hoćemo da obrišemo. Alternativa je da istu listu definišemo preko rednih brojeva kolona: <code class="docutils literal notranslate"><span class="pre">za_brisanje=bibreg.columns[[0,6,7,8,9,10,11,13]]</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">za_brisanje</span><span class="o">=</span><span class="n">bibreg</span><span class="o">.</span><span class="n">columns</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">13</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">za_brisanje</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Argument <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> kaže funkciji da treba obrisati kolone. Da je ta vrednost 0, funkcija bi obrisala redove.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Place of Publication</th>
      <th>Date of Publication</th>
      <th>Publisher</th>
      <th>Title</th>
      <th>Author</th>
      <th>Flickr URL</th>
    </tr>
    <tr>
      <th>Identifier</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>206</th>
      <td>London</td>
      <td>1879 [1878]</td>
      <td>S. Tinsley &amp; Co.</td>
      <td>Walter Forbes. [A novel.] By A. A</td>
      <td>A. A.</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>216</th>
      <td>London; Virtue &amp; Yorston</td>
      <td>1868</td>
      <td>Virtue &amp; Co.</td>
      <td>All for Greed. [A novel. The dedication signed...</td>
      <td>A., A. A.</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>218</th>
      <td>London</td>
      <td>1869</td>
      <td>Bradbury, Evans &amp; Co.</td>
      <td>Love the Avenger. By the author of “All for Gr...</td>
      <td>A., A. A.</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>472</th>
      <td>London</td>
      <td>1851</td>
      <td>James Darling</td>
      <td>Welsh Sketches, chiefly ecclesiastical, to the...</td>
      <td>A., E. S.</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>480</th>
      <td>London</td>
      <td>1857</td>
      <td>Wertheim &amp; Macintosh</td>
      <td>[The World in which I live, and my place in it...</td>
      <td>A., E. S.</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<section id="priprema-numerickih-podataka">
<h3>Priprema numeričkih podataka<a class="headerlink" href="#priprema-numerickih-podataka" title="Permalink to this headline">¶</a></h3>
<p>Sada imamo tabelu sa manje kolona gde je prilično jasno šta je sadržaj. Ono što je sporno je forma sadržaja. U drugoj koloni bi trebalo da budu brojevi koji označavaju godine. Međutim, mašina tu ne vidi brojeve već tekst. CSV fajlovi ne čuvaju podatke o tipu promenljive. Za Pajton je odmah po učitavanju sve između zareza string. Za bilo kakvu numeričku analizu, npr. traženje minimuma, zbira ili srednje vrednosti potrebno je podacima promenimo tip promenljive. Dok god postoje u koloni elementi sa znacima koji nisu cifre, minus i decimalna tačka to neće biti moguće.</p>
<p>Probajte da nađete najstariju knjigu u registru. To bi trebalo da bude najmanji broj u koloni pomoću funkcije <code class="docutils literal notranslate"><span class="pre">min()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># bibreg[&#39;Date of Publication&#39;].min()</span>
</pre></div>
</div>
</div>
</div>
<p>Pre čišćenja podataka prvo treba da vidimo kog su tipa promenljive u kolonama. Od toga zavisi koje ćemo tehnike koristiti za čišćenje.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Place of Publication    object
Date of Publication     object
Publisher               object
Title                   object
Author                  object
Flickr URL              object
dtype: object
</pre></div>
</div>
</div>
</div>
<p>Vidimo da je i <strong>Date of Publication</strong> tipa <em>object</em>. Razlog za to su uglaste zagrade, zarezi i crtice koje se nalaze u nekim poljima te kolone. Dok god postoji barem jedno polje u kom nije broj, Pajton kolonu neće prepoznati kao numeričku. Ukoliko tih polja ima malo, uređivanje možemo da uradimo i ručno. Da vidimo isplati li se to napisaćemo mali program koji pokušava da element niza pretvori u ceo broj. Za svaki element gde ne uspe u tome program će povećati broj za jedan.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">bibreg</span><span class="p">[</span><span class="s1">&#39;Date of Publication&#39;</span><span class="p">]:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">n</span><span class="o">+=</span><span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1759
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">bibreg</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>8287
</pre></div>
</div>
</div>
</div>
<p>Vidimo da čak 1759 od 8287 elemenata u ovoj koloni ne možemo da pretvorimo u broj. To svakako ne treba da radimo ručno.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="p">(</span><span class="n">bibreg</span><span class="p">[</span><span class="s1">&#39;Date of Publication&#39;</span><span class="p">][:</span><span class="mi">30</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Identifier
206            1879 [1878]
216                   1868
218                   1869
472                   1851
480                   1857
481                   1875
519                   1872
667                    NaN
874                   1676
1143                  1679
1280                  1802
1808                  1859
1905                  1888
1929           1839, 38-54
2836                  1897
2854                  1865
2956               1860-63
2957                  1873
3017                  1866
3131                  1899
4598                  1814
4884                  1820
4976                  1800
5382    1847, 48 [1846-48]
5385               [1897?]
5389               [1897?]
5432                  1893
6036                  1805
6821                  1837
7521                  1896
Name: Date of Publication, dtype: object
</pre></div>
</div>
</div>
</div>
<p>Automatsko čišćenje podataka u ovoj koloni nije jednostavno. Prvo, zato što nismo sigurni šta treba da prepoznamo kao broj. Drugo, zato što ne postoji jednostavan način za to.</p>
<p>Da se dogovorimo prvo šta treba da prepoznamo kao broj. Jedno rešenje (koje ne mora da bude najbolje) je da tražimo samo one elemente u koloni koji počinju sa četiri cifre, da te četiri cifre pretvorimo u broj, a da sve ostalo zanemarimo. To znači da bi prvi element bio 1879, drugi 1868 itd.</p>
<p>Način na koji ćemo to uraditi je da prepoznamo deo teksta koristeći regularne izraze. Ovo je dosta komplikovana tema koju ovde ne možemo da obradimo. Možda je najbolje da nam verujete da to tako zaista radi.</p>
</section>
<section id="regularni-izrazi">
<h3>Regularni izrazi<a class="headerlink" href="#regularni-izrazi" title="Permalink to this headline">¶</a></h3>
<p>Regularni izrazi (eng. <em>regular expressions</em>) su kodirani opisi sadržaja u nekom tekstu. Pajton može da pretraži niz tekstualnih podataka u potrazi za sadržajem koji odgovaraju tom opisu. Način na koji se kodiraju regularni izrazi nisu baš intuitivni. Drugim rečima, ako su vam načini na koji se zapisuju i rade regularni izrazi zbunjujući i nerazumljivi, to je sasvim normalno.</p>
<p>Mi ćemo pomoću regularnih izraza da potražimo grupe od četiri cifre na početku tekstualne promenljive. <a class="reference external" href="https://regex101.com/r/3AJ1Pv/1">Regularni izraz</a> koji to opisuje je <code class="docutils literal notranslate"><span class="pre">^(\d{4})</span></code>. Kod <code class="docutils literal notranslate"><span class="pre">\d</span></code> označava <em>digit</em>, odnosno bilo koju cifru, <code class="docutils literal notranslate"><span class="pre">{4}</span></code> znači da se cifre ponavljaju tačno 4 puta, zagrade označavaju grupu koju treba obeležiti, a kod <code class="docutils literal notranslate"><span class="pre">^</span></code> da se tim tekstom počinje red. Za razliku od običnog teksta koji stavljamo pod navodnike kad ga pridružujemo promenljivoj, ovde ispred navodnika stoji slovo <code class="docutils literal notranslate"><span class="pre">r</span></code> koje označava da to nije običan tekst već kodirani opis teksta.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">maska</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;^(\d</span><span class="si">{4}</span><span class="s1">)&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>Sada treba da prođemo kroz sve elemente kolone <strong>Date of Publication</strong> i izvučemo string sa traženim opisom ukoliko postoji u tom elementu. To ćemo uraditi pomoću funkcije <code class="docutils literal notranslate"><span class="pre">str.extract()</span></code>. Argumenti ove funkcije su regularni izraz koji smo stavili u promenljivu <strong>maska</strong> i napomena Pajtonu da izlaz bude samo jedna kolona.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">year</span> <span class="o">=</span> <span class="n">bibreg</span><span class="p">[</span><span class="s1">&#39;Date of Publication&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">maska</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">year</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Identifier
206        1879
216        1868
218        1869
472        1851
480        1857
           ... 
4158088    1838
4158128    1831
4159563     NaN
4159587    1834
4160339    1834
Name: Date of Publication, Length: 8287, dtype: object
</pre></div>
</div>
</div>
</div>
<p>Vidimo da je Pajton prepoznao i izdvojio grupe od četiri cifre koje bi trebalo da predstavljaju godine. Tamo gde mu to nije pošlo za rukom piše <strong>NaN</strong>. Primetite da ovi podaci i dalje nisu brojevi nego stringovi. Da bi postali brojevi potrebno je da ih pretvorimo u brojeve pomoću funkcije <code class="docutils literal notranslate"><span class="pre">to_numeric()</span></code>. To nije bilo moguće pre čišćenja. Nadajmo se da će sada raditi.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">year</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">year</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Ako je sve u redu onda ćemo moći da nađemo najstariju knjigu.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">year</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1510.0
</pre></div>
</div>
</div>
</div>
<p>Najstarija knjiga je iz 1510. godine. To je baš staro. Možete li da otkrijete koja je to knjiga?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">year</span><span class="o">==</span><span class="mi">1510</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Place of Publication</th>
      <th>Date of Publication</th>
      <th>Publisher</th>
      <th>Title</th>
      <th>Author</th>
      <th>Flickr URL</th>
    </tr>
    <tr>
      <th>Identifier</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2938347</th>
      <td>Paris</td>
      <td>1510?]</td>
      <td>in aedibus Nicolai Crispini</td>
      <td>Piutarchi Chaeronensis Regum  Imperatorum Apo...</td>
      <td>NaN</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Sve knjige za koje nismo uspeli da prepoznamo godinu izdavanja imaju oznaku <strong>NaN</strong> koju uočavamo pomoću funkcije <code class="docutils literal notranslate"><span class="pre">isna()</span></code>. Ako saberemo koliko takvih ima, znaćemo koliko je čišćenje bilo uspešno.</p>
<div class="admonition-napomena admonition">
<p class="admonition-title">Napomena</p>
<p>Oznake <strong>NaN</strong> i <strong>null</strong> u Pajtonu nisu sinonimi. NaN je “not-a-number” što predstavlja nenumerički sadržaj u strukturi gde očekujemo brojeve. Null znači da tog podatka uopšte nema. To nije čak ni prazan string.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">year</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>971
</pre></div>
</div>
</div>
</div>
<p>U poređenju sa 1759 broj 971 jeste manji, ali i dalje značajan. Ako bismo se odlučili da prihvatimo i brojeve u uglastim zagradama, onda bi broj očišćenih bio još veći. Tada bi maska sadržala i uglaste zagrade. Njih moramo da navedemo kao <code class="docutils literal notranslate"><span class="pre">\[*</span></code> i <code class="docutils literal notranslate"><span class="pre">\]*</span></code> jer su u pitanju specijalni znaci u RegEx-u. Zvezdica na kraju znači da zagrada ispred i iza broja može da se pojavi, ali ne mora. Tako da će <code class="docutils literal notranslate"><span class="pre">str.extract()</span></code> izdvojiti sve brojeve na početku reda, bili oni sa ili bez uglastih zagrada.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">maska</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;^\[*(\d</span><span class="si">{4}</span><span class="s1">)\]*&#39;</span>
<span class="n">year</span> <span class="o">=</span> <span class="n">bibreg</span><span class="p">[</span><span class="s1">&#39;Date of Publication&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">maska</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">year</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>192
</pre></div>
</div>
</div>
</div>
<p>Bilo bi dobro očišćene numeričke podatke ubaciti nazad u tabelu, ali nije preporučljivo da to uradite tako što prebrišete originalne podatke u koloni <strong>Date of Publication</strong>. Tako bismo izgubili mogućnost da proverimo je li čišćenje bilo dobro i eventualno promenimo kriterijum kasnije. Bolje je da imamo originalnu i očišćenu kolonu jednu pored druge. Pomoću funkcije <code class="docutils literal notranslate"><span class="pre">insert()</span></code> možemo da ubacimo na određeno mesto u tabeli kolonu sa imenom i vrednostima kao argumentima.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Year&quot;</span><span class="p">,</span> <span class="n">year</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Place of Publication</th>
      <th>Date of Publication</th>
      <th>Year</th>
      <th>Publisher</th>
      <th>Title</th>
      <th>Author</th>
      <th>Flickr URL</th>
    </tr>
    <tr>
      <th>Identifier</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>206</th>
      <td>London</td>
      <td>1879 [1878]</td>
      <td>1879</td>
      <td>S. Tinsley &amp; Co.</td>
      <td>Walter Forbes. [A novel.] By A. A</td>
      <td>A. A.</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>216</th>
      <td>London; Virtue &amp; Yorston</td>
      <td>1868</td>
      <td>1868</td>
      <td>Virtue &amp; Co.</td>
      <td>All for Greed. [A novel. The dedication signed...</td>
      <td>A., A. A.</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>218</th>
      <td>London</td>
      <td>1869</td>
      <td>1869</td>
      <td>Bradbury, Evans &amp; Co.</td>
      <td>Love the Avenger. By the author of “All for Gr...</td>
      <td>A., A. A.</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>472</th>
      <td>London</td>
      <td>1851</td>
      <td>1851</td>
      <td>James Darling</td>
      <td>Welsh Sketches, chiefly ecclesiastical, to the...</td>
      <td>A., E. S.</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>480</th>
      <td>London</td>
      <td>1857</td>
      <td>1857</td>
      <td>Wertheim &amp; Macintosh</td>
      <td>[The World in which I live, and my place in it...</td>
      <td>A., E. S.</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>4158088</th>
      <td>London</td>
      <td>1838</td>
      <td>1838</td>
      <td>NaN</td>
      <td>The Parochial History of Cornwall, founded on,...</td>
      <td>GIDDY, afterwards GILBERT, Davies.</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>4158128</th>
      <td>Derby</td>
      <td>1831, 32</td>
      <td>1831</td>
      <td>M. Mozley &amp; Son</td>
      <td>The History and Gazetteer of the County of Der...</td>
      <td>GLOVER, Stephen - of Derby</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>4159563</th>
      <td>London</td>
      <td>[1806]-22</td>
      <td>1806</td>
      <td>T. Cadell and W. Davies</td>
      <td>Magna Britannia; being a concise topographical...</td>
      <td>LYSONS, Daniel - M.A., F.R.S., and LYSONS (Sam...</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>4159587</th>
      <td>Newcastle upon Tyne</td>
      <td>1834</td>
      <td>1834</td>
      <td>Mackenzie &amp; Dent</td>
      <td>An historical, topographical and descriptive v...</td>
      <td>Mackenzie, E. (Eneas)</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>4160339</th>
      <td>London</td>
      <td>1834-43</td>
      <td>1834</td>
      <td>NaN</td>
      <td>Collectanea Topographica et Genealogica. [Firs...</td>
      <td>NaN</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
  </tbody>
</table>
<p>8287 rows × 7 columns</p>
</div></div></div>
</div>
</section>
<section id="ciscenje-tekstualnih-podataka">
<h3>Čišćenje tekstualnih podataka<a class="headerlink" href="#ciscenje-tekstualnih-podataka" title="Permalink to this headline">¶</a></h3>
<p>Za razliku od numeričkih podataka, tekstualne možemo da analiziramo i pre čišćenja. Za tekst imamo drugu vrste analize (koliko ima kojih elemenata, kog ima najviše itd.). Rezultati možda neće biti najpouzdaniji, ali ćemo dobiti nešto informativno. Da vidimo, na primer, statistiku mesta izdavanja knjiga iz registra <strong>bibreg</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span><span class="p">[</span><span class="s1">&#39;Place of Publication&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>London                             3868
Paris                               479
Edinburgh                           208
New York                            177
Leipzig                             119
                                   ... 
Zalt-Bommel, Nijmegen [printed]       1
Санктпетербург, 1862                 1
Carpi                                 1
Antwerpen                             1
Newcastle upon Tyne                   1
Name: Place of Publication, Length: 1441, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Imamo 1441 različit zapis mesta izdavanja. Verovatno mesta izdavanja ima manje, ali su zapisani drugačije. Promena tog broja može da bude pokazatelj koliko smo dobro očistili kolonu.</p>
<p>Da vidimo koliko ima nedostajućih podataka u ovoj koloni.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span><span class="p">[</span><span class="s1">&#39;Place of Publication&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
</div>
</div>
<p>Nema nedostajućih podataka. To će nam olakšati obradu.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span><span class="p">[</span><span class="s1">&#39;Place of Publication&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()[:</span><span class="mi">40</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>London                3868
Paris                  479
Edinburgh              208
New York               177
Leipzig                119
Philadelphia            89
Berlin                  70
Boston [Mass.]          52
Dublin                  48
Glasgow                 45
Oxford                  44
Boston                  41
Wien                    38
Stockholm               33
Madrid                  33
Bruxelles               28
Cambridge               26
Amsterdam               25
Chicago                 24
Firenze                 24
Stuttgart               24
Birmingham              23
Manchester              20
Milano                  20
Tours                   19
enk                     19
Calcutta                19
Bristol                 18
Kjøbenhavn              18
Buenos Aires            16
Edinburgh &amp; London      16
Lisboa                  16
С.-Петербургъ           16
New-York                16
Norwich                 16
Haarlem                 14
Cincinnati              14
London]                 14
México                 14
Napoli                  14
Name: Place of Publication, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Ono što vidimo na prvi pogled je da imamo više zapisa koji se odnose na isti grad. Na primer, <strong>London</strong> (3868) i <strong>London]</strong> (14) ili <strong>Boston [Mass.]</strong> (52) i <strong>Boston</strong> (41). Čišćenje podatka bi to trebalo da objedini. Već iz 40 najčešćih mesta izdavanja vidimo da se nazivi mesta ponavljaju kroz različite zapise. Među ostalih hiljadu mora da ih ima još mnogo.</p>
<p>Da vidimo za zapise u kojima se pojavljuju reči <strong>“London”</strong>, <strong>“Paris”</strong> ili <strong>“Boston”</strong> kakvih sve oblika ima.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">place</span><span class="o">=</span><span class="n">bibreg</span><span class="p">[</span><span class="s1">&#39;Place of Publication&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Kao i kod numeričkih podataka dobra je praksa ne menjati originalne podatke nego napraviti još jednu kolonu (<strong>place</strong>) u kojoj su podaci očišćeni kako mislimo da treba. To nam ostavlja mogućnost da kasnije, pod uticajem nekih novih saznanja, promenimo odluku. Dobro je da originalna kolona i kolona sa očišćenim podacima stoje jedna pored druge.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">place</span><span class="p">[</span><span class="n">place</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;Boston&quot;</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Identifier
16544              Boston
28758              Boston
45172              Boston
53627              Boston
69331              Boston
                ...      
3954038    Boston [Mass.]
3954691            Boston
3954692            Boston
3954693    Boston [Mass.]
3970785     Boston [U.S.]
Name: Place of Publication, Length: 119, dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">place</span><span class="p">[</span><span class="n">place</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;York&quot;</span><span class="p">)]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>New York                                            177
New-York                                             16
London &amp; New York                                    10
York                                                  8
New York &amp; London                                     3
London; New York [printed]                            3
Macmillan &amp; Co.; New York                             2
London, York [printed]                                1
Boston and New York                                   1
pp. viii. 291. Harper &amp; Bros.: New York, 1888         1
Nouvelle-York                                         1
pp. 171. J. Lane: London &amp; New York, 1896             1
New York, 1866                                        1
pp. 330. J. Lane: London &amp; New York, 1899 [1898]      1
Boston &amp; New York                                     1
Nueva-York                                            1
London &amp; New York, Macmillan &amp; Co                     1
New York [printed]; London                            1
London [printed], New York                            1
London; New York printed                              1
4 vol. The Century Co.: New York, 1887, 8º            1
Nueva York                                            1
New York; Kegan Paul &amp; Co                             1
New York [printed], Chicago                           1
pp. 110. John Lane: London, New York, 1918            1
Neuva York [sic]                                      1
New York, London                                      1
London, Edinburgh and New York                        1
Name: Place of Publication, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Ima čak 245 različitih zapisa u kojima se pominje London. To neće biti jednostavno za čišćenje. Neke od ovih zapisa verovatno ne bi trebalo menjati: <strong>Edinburgh &amp; London</strong> bi trebalo da ostane tako kako jeste, ali bi <strong>Longman &amp; Co. London</strong> trebalo promeniti u <strong>London</strong>. Međutim, kod čišćenja podataka treba biti praktičan. Ako već znamo da čišćenje podatka traži mnogo vremena i da nikad ne možemo da budemo sigurni jesmo li sve ispravili kako treba, onda treba početi od očiglednih i značajnih izmena. Prvo ispravljajte greške koje su najbrojnije. Spojte <strong>Boston [Mass.]</strong> i <strong>Boston</strong> u jedan zapis, promenite <strong>New-York</strong> u <strong>New York</strong> pa onda redom.</p>
<p>Postoji li nešto što možemo da uradimo pre nego što konkretne nazive mesta krenemo da zamenjujemo drugima? Vidimo na primer da postoje različiti zapisi “Boston and New York” i “Boston &amp; New York”. Ako zamenimo <code class="docutils literal notranslate"><span class="pre">and</span></code> sa <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> onda će to imati efekta kod svih kombinacija gradova, ne samo kod Bostona i Njujorka.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">place</span><span class="o">=</span><span class="n">place</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; and &quot;</span><span class="p">,</span> <span class="s2">&quot; &amp; &quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">place</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>London                             3868
Paris                               479
Edinburgh                           208
New York                            177
Leipzig                             119
                                   ... 
Zalt-Bommel, Nijmegen [printed]       1
Санктпетербург, 1862                 1
Carpi                                 1
Antwerpen                             1
Newcastle upon Tyne                   1
Name: Place of Publication, Length: 1439, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Smanjili smo broj različitih oblika zapisa za 2. Nije previše uspešno. Da vidimo dalje. Izgleda da znak “;” u zapisu znači da posle toga ide nešto manje važno, npr. gde je knjiga štampana ili se još jednom pojavi ko je izdavač.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">place</span><span class="p">[</span><span class="n">place</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>London; Edinburgh [printed]                               6
London; Guildford [printed]                               4
London; Nuremberg [printed                                3
London; New York [printed]                                3
London; Perth [printed                                    3
                                                         ..
New York; Kegan Paul &amp; Co                                 1
Jones &amp; Piggott; London                                   1
Philadelphia; London                                      1
Edinburgh; John Murray                                    1
pp. xxvi, 375. London: Jackson, Walford &amp; Hodder; 1865    1
Name: Place of Publication, Length: 69, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Možda bismo mogli da pomoću funkcije uklonimo sve što se pojavljuje posle “;”, odnosno da podelimo stringove na liste <code class="docutils literal notranslate"><span class="pre">split()</span></code> tako što će upravo tačka-zarez biti separator pa da onda uzmemo samo prvi element liste. Argument <code class="docutils literal notranslate"><span class="pre">expand=True</span></code> služi da rezultat pretvori u <em>DataFrame</em> kako bismo mogli da uzmemo samo prvi deo, odnosno kolonu sa indeksom 0.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">place</span><span class="o">=</span><span class="n">place</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">,</span><span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">place</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()[:</span><span class="mi">40</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>London                3923
Paris                  480
Edinburgh              211
New York               178
Leipzig                119
Philadelphia            90
Berlin                  70
Boston [Mass.]          53
Dublin                  48
Glasgow                 45
Oxford                  44
Boston                  42
Wien                    38
Madrid                  34
Stockholm               33
Bruxelles               28
Cambridge               26
Amsterdam               25
Stuttgart               24
Firenze                 24
Chicago                 24
Birmingham              23
Manchester              22
Edinburgh &amp; London      22
Milano                  20
Bristol                 19
enk                     19
Calcutta                19
Tours                   19
Kjøbenhavn              18
Buenos Aires            16
Norwich                 16
Lisboa                  16
С.-Петербургъ           16
New-York                16
Haarlem                 14
México                 14
Napoli                  14
Cincinnati              14
London]                 14
Name: 0, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Ovo je izgleda pomoglo više. Sada imamo 49 oblika zapisa manje. Broj zapisa gde je London mesto izdavanja se povećao sa 3868 na 3923. To znači da smo za kratko vreme napravili pomak. Da smo ručno čistili podatke, mnogo više vremena bi nam trebalo. Na sličan način bismo mogli da čistimo i uglaste zagrade, da brišemo nazive država iz zapisa (npr. U.S.A.), ali bi korišćenje regularnih izraza bilo vrlo poželjno. Probajte sami šta možete da očistite na ovaj način.</p>
<p>Sada da zamenimo konkretne zapise koje smo pominjali ranije.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">place</span><span class="p">[</span><span class="n">place</span><span class="o">==</span><span class="s1">&#39;Boston [Mass.]&#39;</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;Boston&#39;</span>
<span class="n">place</span><span class="p">[</span><span class="n">place</span><span class="o">==</span><span class="s1">&#39;New-York&#39;</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;New York&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">place</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()[:</span><span class="mi">40</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>London                3923
Paris                  480
Edinburgh              211
New York               194
Leipzig                119
Boston                  95
Philadelphia            90
Berlin                  70
Dublin                  48
Glasgow                 45
Oxford                  44
Wien                    38
Madrid                  34
Stockholm               33
Bruxelles               28
Cambridge               26
Amsterdam               25
Chicago                 24
Firenze                 24
Stuttgart               24
Birmingham              23
Edinburgh &amp; London      22
Manchester              22
Milano                  20
Bristol                 19
Calcutta                19
enk                     19
Tours                   19
Kjøbenhavn              18
Norwich                 16
Buenos Aires            16
С.-Петербургъ           16
Lisboa                  16
Cincinnati              14
London]                 14
México                 14
Haarlem                 14
Napoli                  14
Mexico                  13
Budapest                13
Name: 0, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Tabela sada izgleda čistije, ali posao čišćenja ni izbliza nije gotov. Mi ćemo se, međutim, ovde zaustaviti jer ne želimo da ceo kurs prođe u čišćenju podataka u ovoj jednoj koloni. Konačno, ubacićemo niz <strong>place</strong> kao novu kolonu pored <strong>Place of Publication</strong> kako bismo mogli da kontrolišemo je li čišćenje bilo uspešno.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Place&quot;</span><span class="p">,</span> <span class="n">place</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bibreg</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Place of Publication</th>
      <th>Place</th>
      <th>Date of Publication</th>
      <th>Year</th>
      <th>Publisher</th>
      <th>Title</th>
      <th>Author</th>
      <th>Flickr URL</th>
    </tr>
    <tr>
      <th>Identifier</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>206</th>
      <td>London</td>
      <td>London</td>
      <td>1879 [1878]</td>
      <td>1879</td>
      <td>S. Tinsley &amp; Co.</td>
      <td>Walter Forbes. [A novel.] By A. A</td>
      <td>A. A.</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>216</th>
      <td>London; Virtue &amp; Yorston</td>
      <td>London</td>
      <td>1868</td>
      <td>1868</td>
      <td>Virtue &amp; Co.</td>
      <td>All for Greed. [A novel. The dedication signed...</td>
      <td>A., A. A.</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>218</th>
      <td>London</td>
      <td>London</td>
      <td>1869</td>
      <td>1869</td>
      <td>Bradbury, Evans &amp; Co.</td>
      <td>Love the Avenger. By the author of “All for Gr...</td>
      <td>A., A. A.</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>472</th>
      <td>London</td>
      <td>London</td>
      <td>1851</td>
      <td>1851</td>
      <td>James Darling</td>
      <td>Welsh Sketches, chiefly ecclesiastical, to the...</td>
      <td>A., E. S.</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>480</th>
      <td>London</td>
      <td>London</td>
      <td>1857</td>
      <td>1857</td>
      <td>Wertheim &amp; Macintosh</td>
      <td>[The World in which I live, and my place in it...</td>
      <td>A., E. S.</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>4158088</th>
      <td>London</td>
      <td>London</td>
      <td>1838</td>
      <td>1838</td>
      <td>NaN</td>
      <td>The Parochial History of Cornwall, founded on,...</td>
      <td>GIDDY, afterwards GILBERT, Davies.</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>4158128</th>
      <td>Derby</td>
      <td>Derby</td>
      <td>1831, 32</td>
      <td>1831</td>
      <td>M. Mozley &amp; Son</td>
      <td>The History and Gazetteer of the County of Der...</td>
      <td>GLOVER, Stephen - of Derby</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>4159563</th>
      <td>London</td>
      <td>London</td>
      <td>[1806]-22</td>
      <td>1806</td>
      <td>T. Cadell and W. Davies</td>
      <td>Magna Britannia; being a concise topographical...</td>
      <td>LYSONS, Daniel - M.A., F.R.S., and LYSONS (Sam...</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>4159587</th>
      <td>Newcastle upon Tyne</td>
      <td>Newcastle upon Tyne</td>
      <td>1834</td>
      <td>1834</td>
      <td>Mackenzie &amp; Dent</td>
      <td>An historical, topographical and descriptive v...</td>
      <td>Mackenzie, E. (Eneas)</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
    <tr>
      <th>4160339</th>
      <td>London</td>
      <td>London</td>
      <td>1834-43</td>
      <td>1834</td>
      <td>NaN</td>
      <td>Collectanea Topographica et Genealogica. [Firs...</td>
      <td>NaN</td>
      <td>http://www.flickr.com/photos/britishlibrary/ta...</td>
    </tr>
  </tbody>
</table>
<p>8287 rows × 8 columns</p>
</div></div></div>
</div>
<p>Da vidimo sada i kako bismo počeli čišćenje u koloni po imenu autora. Tu verovatno postoji mnogo više vrednosti i više načina na koji su zapisane.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">author</span><span class="o">=</span><span class="n">bibreg</span><span class="p">[</span><span class="s1">&#39;Author&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">author</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Shakespeare, William                                                           48
Byron, George Gordon Byron - Baron                                             40
Scott, Walter - Sir                                                            29
Burns, Robert                                                                  28
NORIE, John William.                                                           26
                                                                               ..
GOEDE, Christian August Gottlieb.                                               1
GOECKE, Rudolf.                                                                 1
GODWIN, Rupert.                                                                 1
GODLONTON, Robert - and IRVING (Edward) of Graham&#39;s Town, Cape of Good Hope     1
Mackenzie, E. (Eneas)                                                           1
Name: Author, Length: 5005, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Nije baš iznenađenje da je Šekspir najzastupljeniji u Britanskoj biblioteci. Pitanje je samo na koliko se načina piše ime ovog autora.</p>
<p>Da proverimo ima li ovde nedostajućih podataka.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">author</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1778
</pre></div>
</div>
</div>
</div>
<p>Ima ih. To malo menja način na koji filtriramo podatke. Funkcija <code class="docutils literal notranslate"><span class="pre">str.contains()</span></code> više nema samo <em>True</em> i <em>False</em> kao rezultat pošto logički izraz ne možemo da izračunamo za podatke koji nedostaju. Potrebno je da umesto nedostajućih vrednosti stavimo neku vrednost, npr. prazan string <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">author</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Da bismo izbegli različite varijante istog imena (npr. Shakespeare i SHAKESPEARE), stavićemo parametar <code class="docutils literal notranslate"><span class="pre">case=False</span></code> pa će tako pretraga biti objedinjena.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">author</span><span class="p">[</span><span class="n">author</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;shakespeare&quot;</span><span class="p">,</span><span class="n">case</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Shakespeare, William    48
Name: Author, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Ovde, ipak, sve izgleda čisto. Zato nećemo trošiti više vremena na obradu ove kolone.</p>
</section>
<section id="datum-i-vreme">
<h3>Datum i vreme<a class="headerlink" href="#datum-i-vreme" title="Permalink to this headline">¶</a></h3>
<p>Slično kao što Pajton ne prepoznaje brojeve u “prljavoj” koloni, ne prepoznaje ni datume i vreme. Da bismo mogli da analiziramo vremenske podatke, neophodno je da ih zabeležimo u istom formatu i da ih konvertujemo u odgovarajući, <em>DateTime</em> format pomoću funkcije <code class="docutils literal notranslate"><span class="pre">to_datetime()</span></code>. U primeru sa bibliotečkim registrom, doduše, to nema mnogo smisla jer su date samo godine bez datuma pa je i samo jedan broj dovoljan da prikaže godinu izdanja.</p>
<p>String koji sadrži datum, prema ISO standardu, treba da ima format <strong>‘YYYY-MM-DD’</strong> ili <strong>‘YYYY-MM-DD HH:MM:SS’</strong> ako sadrži i vreme. Ukoliko Pajton pročita ovakav string, umeće lako da ga pretvori u promenljivu tipa datum odakle možemo da pročitamo godinu, dan, mesec itd. Ako je datum zapisan string u ovom formatu, onda nema potrebe da naglašavamo koji je format. Međutim, ako umesto 2021-07-13 stoji 12. 7. 2021. ili July 13, 2021 onda moramo Pajtonu tačno da kažemo kako da pričita taj podatak.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">datum_string</span><span class="o">=</span><span class="s1">&#39;2021-07-13&#39;</span>
<span class="c1"># datum_string=&#39;2021-07-13 10:15:00&#39;</span>
<span class="c1"># datum_string=&#39;13. 7. 2021.&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">datum</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">datum_string</span><span class="p">)</span>
<span class="c1"># datum = pd.to_datetime(datum_string, format=&#39;%d. %m. %Y.&#39;)</span>
<span class="n">godina</span><span class="o">=</span> <span class="n">datum</span><span class="o">.</span><span class="n">year</span>
<span class="n">mesec</span> <span class="o">=</span> <span class="n">datum</span><span class="o">.</span><span class="n">month</span>
<span class="n">dan</span> <span class="o">=</span> <span class="n">datum</span><span class="o">.</span><span class="n">day</span>
<span class="n">sat</span><span class="o">=</span><span class="n">datum</span><span class="o">.</span><span class="n">hour</span>
<span class="n">minut</span><span class="o">=</span><span class="n">datum</span><span class="o">.</span><span class="n">minute</span>
<span class="n">sekund</span><span class="o">=</span><span class="n">datum</span><span class="o">.</span><span class="n">second</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dan</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>13
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="bonus-problemi">
<h2>Bonus problemi<a class="headerlink" href="#bonus-problemi" title="Permalink to this headline">¶</a></h2>
<p>Čišćenje podataka u Srbiji je malo izazovnije nego u većini drugih (evropskih) zemalja. Prvi razlog za to je što koristimo dva pisma pa se često suočavamo sa nekonzistentno unetim podacima. Drugi razlog je nedosledna upotreba decimalnog zareza. Na računaru i kalkulatoru obično koristimo tačku, a zvanični dokumenti traže zarez. Još gore, separator za hiljade je u srpskom jeziku tačka, a u engleskom zarez. Konačno, treći razlog za izazovnije čišćenje podataka je nedosledno zapisivanje datuma.</p>
<section id="cirilica-i-latinica">
<h3>Ćirilica i latinica<a class="headerlink" href="#cirilica-i-latinica" title="Permalink to this headline">¶</a></h3>
<p>U sledećoj ćeliji izgleda kao da smo isti kôd napisali dva puta. Logično, očekujemo da će izlaz u oba slučaja biti isti. Međutim, slovo A je jednom ukucano korišćenjem latinične, a drugi put korišćenjem ćirilične tastature. Pajton je primetio tu razliku i zapamtio dve različite vrednosti ASCII kôdova. To što A i A izgledaju isto, ne znači da ih računar isto registruje.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">slovo</span> <span class="o">=</span> <span class="s1">&#39;A&#39;</span> <span class="c1"># А latinicom</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ASCII vrednost znaka &#39;&quot;</span> <span class="o">+</span> <span class="n">slovo</span> <span class="o">+</span> <span class="s2">&quot;&#39; je&quot;</span><span class="p">,</span> <span class="nb">ord</span><span class="p">(</span><span class="n">slovo</span><span class="p">))</span>

<span class="n">slovo</span> <span class="o">=</span> <span class="s1">&#39;А&#39;</span> <span class="c1"># А ćirilicom</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ASCII vrednost znaka &#39;&quot;</span> <span class="o">+</span> <span class="n">slovo</span> <span class="o">+</span> <span class="s2">&quot;&#39; je&quot;</span><span class="p">,</span> <span class="nb">ord</span><span class="p">(</span><span class="n">slovo</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ASCII vrednost znaka &#39;A&#39; je 65
ASCII vrednost znaka &#39;А&#39; je 1040
</pre></div>
</div>
</div>
</div>
<p>Zaista, kad pitamo Pajton da li su ova dva znaka ista, on kaže da nisu.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;A&quot;</span><span class="o">==</span><span class="s2">&quot;А&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
<p>Ova osobina tekstova pisanih ćirilicom u odnosu na one pisane latinicom često pravi neočekivane probleme u obradi tekstualnih podataka. Zato je veoma važno da to stalno imamo na umu i da, kad god je to moguće, podatke unosimo korišćenjem istog pisma i iste tastature.</p>
<p>Pajton ima biblioteke koje mogu da pomognu u ujednačavanju teksta. Biblioteka <code class="docutils literal notranslate"><span class="pre">cyrtranslit</span></code> ima funkcije koje mogu da urade transliteraciju i ćirilični tekst prepišu u latinični i obrnuto. Ako biblioteka cyrtranslit nije već instalirana, instalirajte je sa <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">cyrtranslit</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cyrtranslit</span>

<span class="c1"># iz latinice u ćirilicu</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cyrtranslit</span><span class="o">.</span><span class="n">to_cyrillic</span><span class="p">(</span><span class="s2">&quot;daždevnjak&quot;</span><span class="p">))</span>

<span class="c1"># i iz ćirilice u latinicu</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cyrtranslit</span><span class="o">.</span><span class="n">to_latin</span><span class="p">(</span><span class="s2">&quot;мравињак&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>даждевњак
mravinjak
</pre></div>
</div>
</div>
</div>
</section>
<section id="decimalni-zarez-i-decimalna-tacka">
<h3>Decimalni zarez i decimalna tačka<a class="headerlink" href="#decimalni-zarez-i-decimalna-tacka" title="Permalink to this headline">¶</a></h3>
<p>Kada učitavate ili snimate fajl sa podacima koji su decimalni brojevi, vodite računa da li se koristi decimalna tačka ili zarez. Zvanični podaci u Srbiji bi trebalo da uvek imaju decimalni zarez. Ako koristimo CSV format, to će sigurno biti problem. Ne može isti znak da odvaja celobrojni i decimаlni deo broja, kao i da odvaja pojedinačne podatke u fajlu. Rešenje za ovaj problem je da separator umesto zareza bude tačka-zarez što dobijamo postavljanjem parametra <code class="docutils literal notranslate"><span class="pre">sep=&quot;;&quot;</span></code> u funkciji <code class="docutils literal notranslate"><span class="pre">read_csv()</span></code>. Ovakav format se ponekad naziva CSV2.</p>
<p>Ovde samo navodimo primer kako se učitava tabela iz CSV fajla gde separator nije zarez. Ovaj fajl ćemo više koristiti u narednim sveskama.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazatelji</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;data/03IND01.csv&quot;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Alternativno rešenje je da se ipak koristi zarez kao separator, ali da se sve vrednosti stave pod znake navoda postavljajući parametar <code class="docutils literal notranslate"><span class="pre">quotechar='&quot;'</span></code>. Tada je potrebno da se tabele i snimaju i da se učitavaju sa podacima stavljenim pod navodnike.</p>
<p>Kako bi se izbegli problemi sa formatima teksualnog zapisa, često se koristi robusniji format podataka koji nije osetljiv na pismo koje koristimo ili izbor separatora. JSON (<em>JavaScript Object Notation</em>) format služi za prenošenje složenijih struktura podatka između različitih platformi. Taj format za prenos podataka, isti za volju, nije baš pregledan ali je razumljiv i ljudima i mašinama. Otvoreni podaci su najčešće dostupni upravo u ova dva formata: CSV i JSON.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazatelji</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">&quot;data/03IND01.json&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Kada bismo pogledali kakav se tekst nalazi u jednom JSON fajlu, videli bismo strukturu koja nalikuje listi u Pajtonu gde pored svakog podatka upisanog pod znacima navoda stoji naziv kolone, takođe pod znacima navoda. Ovakav fajl deluje nepotrebno redundantno, ali se to pokazuje kao velika prednost kod složenih struktura podataka.</p>
<blockquote>
<div><p>[{“IDIndikator”:”IND00M01”,”Indikator”:”Градоначелник/председник општине”,”mes”:”06”,”god”:”2021”,”idter”:”70017”,”nter”:”Александровац”,”vrednost”:”МИРКО МИХАЈЛОВИЋ”,”CreateDate”:”6/1/2021 9:41:50 AM”,”LastUpdate”:”6/1/2021 9:41:50 AM”,”IDLegenda”:”A”,”nIzvorI”:”Републички завод за статистику (РЗС)”},{“IDIndikator”:”IND01G01”,”Indikator”:”Површина (у км²)”,”mes”:”00”,”god”:”2020”,”idter”:”70017”,”nter”:”Александровац”,”vrednost”:”387”,”CreateDate”:”1/27/2021 10:15:39 AM”,”LastUpdate”:”1/27/2021 10:22:18 AM”,”IDLegenda”:”A”,”nIzvorI”:”Републички геодетски завод (РГЗ)”},{“IDIndikator”:”IND01G02”,”Indikator”:”Број становника - процена (последњи расположив податак за</p>
</div></blockquote>
<p>Mi bismo mogli da čitamo ovakve podatke iako nisu pregledni mada bi bilo bolje da ih pročita mašina pa da nam ih prikaže u nekoj tabeli. Učitavanje podataka u JSON formatu je analogno onom za CSV s tim da ovde nije potrebno navesti šta je separator.</p>
<p>Snimanje tabele tipa <em>DataFrame</em> u fajl je isto tako jednostavno. Za to služe funkcije <code class="docutils literal notranslate"><span class="pre">to_csv()</span></code> i <code class="docutils literal notranslate"><span class="pre">to_json()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazatelji</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;output/temp.csv&quot;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="c1"># pokazatelji.to_json(&quot;output/temp.json&quot;)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="2%20Eksplorativna%20analiza%20podataka.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Eksplorativna analiza podataka</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="4%20Priprema%20i%20deskriptivna%20analiza%20numeri%C4%8Dkih%20podataka.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Priprema i deskriptivna analiza numeričkih podataka</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Srđan Verbić<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>